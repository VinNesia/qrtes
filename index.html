<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Free Professional QR Code VCard Generator - Blog Vinnesia</title>
    <meta name="description" content="Create professional VCard QR codes for free with advanced features. Upload photos, choose styles, custom colors, and download instantly. Best QR Code generator.">
    <meta name="keywords" content="qr code generator, vcard qr code, free qr generator, contact qr code, professional qr code, qr code maker">
    <meta name="author" content="Vin Nesia">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://blog.vinnesia.my.id/tools/qr-code-vcard">
    <link rel="icon" type="image/x-icon" href="data:image/x-icon;base64,AAABAAEAEBAAAAEACABoBQAAFgAAACgAAAAQAAAAIAAAAAEACAAAAAAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAAAA">
    
    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="Free Professional QR Code VCard Generator - Blog Vinnesia">
    <meta property="og:description" content="Create professional VCard QR codes for free with advanced features">
    <meta property="og:image" content="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNkYPhfDwAChwGA60e6kgAAAABJRU5ErkJggg==">
    <meta property="og:url" content="https://blog.vinnesia.my.id/tools/qr-code-vcard">
    <meta property="og:type" content="website">
    
    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Free Professional QR Code VCard Generator">
    <meta name="twitter:description" content="Create professional VCard QR codes for free with advanced features">
    
    <!-- Performance optimizations -->
    <link rel="preconnect" href="https://cdnjs.cloudflare.com">
    <link rel="dns-prefetch" href="//cdnjs.cloudflare.com">
    <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/qrious/4.0.2/qrious.min.js" as="script">
    
    <!-- Structured Data -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "QR Code VCard Generator",
        "description": "Professional QR Code VCard generator with advanced features",
        "url": "https://blog.vinnesia.my.id/tools/qr-code-vcard",
        "author": {
            "@type": "Person",
            "name": "Vin Nesia"
        },
        "applicationCategory": "UtilitiesApplication",
        "operatingSystem": "Any",
        "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "USD"
        }
    }
    </script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-color: #6366f1;
            --primary-dark: #4f46e5;
            --secondary-color: #8b5cf6;
            --accent-color: #06b6d4;
            --bg-primary: #0f172a;
            --bg-secondary: #1e293b;
            --bg-card: #334155;
            --text-primary: #f8fafc;
            --text-secondary: #cbd5e1;
            --border-color: #475569;
            --success-color: #10b981;
            --warning-color: #f59e0b;
            --error-color: #ef4444;
        }

        /* Performance optimizations */
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
            min-height: 100vh;
            overflow-x: hidden;
            scroll-behavior: smooth;
            /* Optimize for smooth scrolling */
            -webkit-overflow-scrolling: touch;
            transform: translateZ(0);
            will-change: scroll-position;
        }

        /* Optimized background with reduced complexity */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(ellipse at 20% 20%, rgba(99, 102, 241, 0.08) 0%, transparent 40%),
                radial-gradient(ellipse at 80% 80%, rgba(139, 92, 246, 0.08) 0%, transparent 40%),
                linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #0f172a 100%);
            pointer-events: none;
            z-index: -1;
            /* Use transform3d for hardware acceleration */
            transform: translate3d(0, 0, 0);
        }

        /* Smooth container with optimized animations */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            /* GPU acceleration */
            transform: translate3d(0, 0, 0);
        }

        .header {
            text-align: center;
            margin-bottom: 4rem;
            position: relative;
            padding: 2rem 0;
        }

        .logo {
            width: 80px;
            height: 80px;
            margin: 0 auto 2rem;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 
                0 20px 40px rgba(99, 102, 241, 0.4),
                0 0 0 1px rgba(255, 255, 255, 0.1),
                inset 0 1px 0 rgba(255, 255, 255, 0.2);
            animation: logoFloat 3s ease-in-out infinite;
            position: relative;
            overflow: hidden;
            /* Hardware acceleration */
            transform: translate3d(0, 0, 0);
            backface-visibility: hidden;
        }

        .logo::before {
            content: "QR";
            color: white;
            font-size: 24px;
            font-weight: bold;
            z-index: 1;
            position: relative;
        }

        @keyframes logoFloat {
            0%, 100% { transform: translate3d(0, 0, 0); }
            50% { transform: translate3d(0, -10px, 0); }
        }

        h1 {
            font-size: clamp(2rem, 5vw, 3rem);
            font-weight: 800;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color), var(--accent-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 1rem;
            animation: fadeInUp 0.8s ease-out;
        }

        .subtitle {
            color: var(--text-secondary);
            font-size: clamp(1rem, 2vw, 1.2rem);
            animation: fadeInUp 0.8s ease-out 0.2s both;
            max-width: 600px;
            margin: 0 auto;
            font-weight: 300;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translate3d(0, 30px, 0);
            }
            to {
                opacity: 1;
                transform: translate3d(0, 0, 0);
            }
        }

        .main-content {
            display: flex;
            flex-direction: column;
            gap: 2rem;
            margin-bottom: 3rem;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
        }

        .form-section, .preview-section {
            background: rgba(51, 65, 85, 0.8);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(148, 163, 184, 0.1);
            border-radius: 24px;
            padding: 2.5rem;
            position: relative;
            overflow: hidden;
            animation: slideInUp 0.8s ease-out;
            box-shadow: 
                0 25px 50px -12px rgba(0, 0, 0, 0.4),
                0 0 0 1px rgba(255, 255, 255, 0.05),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
            /* GPU acceleration */
            transform: translate3d(0, 0, 0);
            backface-visibility: hidden;
        }

        @keyframes slideInUp {
            from {
                opacity: 0;
                transform: translate3d(0, 50px, 0);
            }
            to {
                opacity: 1;
                transform: translate3d(0, 0, 0);
            }
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
        }

        label {
            display: block;
            margin-bottom: 0.5rem;
            color: var(--text-primary);
            font-weight: 500;
            font-size: 0.9rem;
        }

        input[type="text"],
        input[type="email"],
        input[type="tel"],
        textarea,
        select {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid var(--border-color);
            border-radius: 12px;
            background: var(--bg-secondary);
            color: var(--text-primary);
            font-size: 1rem;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            /* Optimize for performance */
            will-change: border-color, transform, box-shadow;
        }

        input[type="text"]:focus,
        input[type="email"]:focus,
        input[type="tel"]:focus,
        textarea:focus,
        select:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
            transform: translate3d(0, -2px, 0);
        }

        textarea {
            resize: vertical;
            min-height: 80px;
        }

        /* Optimized Generate Button with Advanced Animations */
        .generate-btn {
            width: 100%;
            padding: 20px;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            border: none;
            border-radius: 16px;
            font-size: 1.2rem;
            font-weight: 700;
            cursor: pointer;
            margin-top: 2rem;
            position: relative;
            overflow: hidden;
            letter-spacing: 0.5px;
            text-transform: uppercase;
            /* Performance optimizations */
            transform: translate3d(0, 0, 0);
            backface-visibility: hidden;
            will-change: transform, box-shadow;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* Animated gradient background */
        .generate-btn::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(
                45deg,
                transparent 30%,
                rgba(255, 255, 255, 0.3) 50%,
                transparent 70%
            );
            transform: rotate(-45deg);
            animation: shimmerMove 3s linear infinite;
            will-change: transform;
        }

        @keyframes shimmerMove {
            0% {
                transform: translateX(-100%) translateY(-100%) rotate(-45deg);
            }
            100% {
                transform: translateX(100%) translateY(100%) rotate(-45deg);
            }
        }

        /* Floating particles effect */
        .generate-btn::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 20% 20%, rgba(255, 255, 255, 0.3) 2px, transparent 2px),
                radial-gradient(circle at 80% 20%, rgba(255, 255, 255, 0.2) 1px, transparent 1px),
                radial-gradient(circle at 40% 80%, rgba(255, 255, 255, 0.3) 1.5px, transparent 1.5px),
                radial-gradient(circle at 60% 60%, rgba(255, 255, 255, 0.2) 1px, transparent 1px),
                radial-gradient(circle at 85% 70%, rgba(255, 255, 255, 0.25) 1.5px, transparent 1.5px);
            background-size: 40px 40px, 60px 60px, 50px 50px, 45px 45px, 35px 35px;
            animation: particlesFloat 8s ease-in-out infinite;
            opacity: 0.6;
            will-change: transform, opacity;
        }

        @keyframes particlesFloat {
            0%, 100% {
                transform: translate(0, 0);
                opacity: 0.6;
            }
            25% {
                transform: translate(2px, -3px);
                opacity: 0.8;
            }
            50% {
                transform: translate(-1px, -5px);
                opacity: 0.7;
            }
            75% {
                transform: translate(3px, -2px);
                opacity: 0.9;
            }
        }

        /* Glow effect on hover */
        .generate-btn:hover::before {
            animation-duration: 1.5s;
        }

        .generate-btn:hover {
            transform: translate3d(0, -4px, 0) scale(1.02);
            box-shadow: 
                0 25px 50px rgba(99, 102, 241, 0.5),
                0 0 0 1px rgba(255, 255, 255, 0.1),
                0 0 30px rgba(99, 102, 241, 0.3);
        }

        .generate-btn:active {
            transform: translate3d(0, -2px, 0) scale(0.98);
            box-shadow: 
                0 15px 30px rgba(99, 102, 241, 0.4),
                0 0 0 1px rgba(255, 255, 255, 0.1);
        }

        .generate-btn:disabled {
            opacity: 0.7;
            cursor: not-allowed;
            transform: translate3d(0, 0, 0);
            box-shadow: none;
        }

        .generate-btn:disabled::before,
        .generate-btn:disabled::after {
            animation-play-state: paused;
        }

        .generate-btn span {
            position: relative;
            z-index: 2;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        /* Enhanced loading animation */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: #ffffff;
            animation: spin 1s linear infinite;
            /* GPU acceleration */
            transform: translate3d(0, 0, 0);
            backface-visibility: hidden;
        }

        @keyframes spin {
            to { transform: translate3d(0, 0, 0) rotate(360deg); }
        }

        /* Advanced pulse animation for generating state */
        .generate-btn.generating {
            animation: advancedPulse 2s infinite;
            box-shadow: 
                0 0 0 0 rgba(99, 102, 241, 0.7),
                0 20px 40px rgba(99, 102, 241, 0.3);
        }

        .generate-btn.generating::after {
            animation: particlesFloat 2s ease-in-out infinite, generatingGlow 2s infinite;
        }

        @keyframes advancedPulse {
            0% {
                box-shadow: 
                    0 0 0 0 rgba(99, 102, 241, 0.7),
                    0 20px 40px rgba(99, 102, 241, 0.3);
                transform: translate3d(0, -4px, 0) scale(1);
            }
            50% {
                box-shadow: 
                    0 0 0 15px rgba(99, 102, 241, 0.2),
                    0 25px 50px rgba(99, 102, 241, 0.4);
                transform: translate3d(0, -4px, 0) scale(1.02);
            }
            100% {
                box-shadow: 
                    0 0 0 0 rgba(99, 102, 241, 0),
                    0 20px 40px rgba(99, 102, 241, 0.3);
                transform: translate3d(0, -4px, 0) scale(1);
            }
        }

        @keyframes generatingGlow {
            0%, 100% { opacity: 0.6; }
            50% { opacity: 1; }
        }

        /* Success state animation */
        .generate-btn.success {
            background: linear-gradient(135deg, var(--success-color), #059669);
            animation: successBounce 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        @keyframes successBounce {
            0% {
                transform: translate3d(0, -4px, 0) scale(1);
            }
            50% {
                transform: translate3d(0, -8px, 0) scale(1.05);
            }
            100% {
                transform: translate3d(0, -4px, 0) scale(1);
            }
        }

        /* Error state animation */
        .generate-btn.error {
            background: linear-gradient(135deg, var(--error-color), #dc2626);
            animation: errorShake 0.6s cubic-bezier(0.36, 0.07, 0.19, 0.97);
        }

        @keyframes errorShake {
            0%, 100% { transform: translate3d(0, -4px, 0); }
            20%, 60% { transform: translate3d(-4px, -4px, 0); }
            40%, 80% { transform: translate3d(4px, -4px, 0); }
        }

        .file-upload {
            position: relative;
            display: inline-block;
            width: 100%;
        }

        .file-input {
            position: absolute;
            opacity: 0;
            width: 100%;
            height: 100%;
            cursor: pointer;
        }

        .file-label {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 24px;
            border: 2px dashed rgba(148, 163, 184, 0.3);
            border-radius: 16px;
            background: rgba(30, 41, 59, 0.5);
            backdrop-filter: blur(10px);
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            text-align: center;
            min-height: 120px;
            position: relative;
            overflow: hidden;
            /* GPU acceleration */
            transform: translate3d(0, 0, 0);
            will-change: transform, border-color;
        }

        .file-label:hover {
            border-color: var(--primary-color);
            background: rgba(99, 102, 241, 0.1);
            transform: translate3d(0, -4px, 0);
            box-shadow: 0 15px 35px rgba(99, 102, 241, 0.2);
        }

        .photo-preview {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            object-fit: cover;
            border: 4px solid var(--primary-color);
            margin-bottom: 1rem;
            box-shadow: 
                0 10px 25px rgba(0, 0, 0, 0.3),
                0 0 0 1px rgba(255, 255, 255, 0.1);
            animation: photoAppear 0.5s ease-out;
            /* GPU acceleration */
            transform: translate3d(0, 0, 0);
        }

        @keyframes photoAppear {
            from { 
                opacity: 0; 
                transform: translate3d(0, 0, 0) scale(0.8); 
            }
            to { 
                opacity: 1; 
                transform: translate3d(0, 0, 0) scale(1); 
            }
        }

        .customization-section {
            margin-top: 2rem;
            padding-top: 2rem;
            border-top: 1px solid var(--border-color);
        }

        .section-title {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 1rem;
            color: var(--text-primary);
        }

        .color-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .color-option {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.5rem;
        }

        .color-picker {
            width: 60px;
            height: 60px;
            border: none;
            border-radius: 50%;
            cursor: pointer;
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            /* GPU acceleration */
            transform: translate3d(0, 0, 0);
            will-change: transform;
        }

        .color-picker:hover {
            transform: translate3d(0, 0, 0) scale(1.1);
        }

        .style-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 1rem;
        }

        .style-option {
            padding: 12px;
            border: 2px solid var(--border-color);
            border-radius: 12px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            background: var(--bg-secondary);
            /* GPU acceleration */
            transform: translate3d(0, 0, 0);
            will-change: transform, border-color;
        }

        .style-option:hover,
        .style-option.active {
            border-color: var(--primary-color);
            background: rgba(99, 102, 241, 0.1);
            transform: translate3d(0, -2px, 0);
        }

        .preview-container {
            text-align: center;
            min-height: 300px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .qr-placeholder {
            width: 300px;
            height: 300px;
            border: 2px dashed rgba(148, 163, 184, 0.3);
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-secondary);
            font-size: 1.1rem;
            margin: 2rem auto;
            background: rgba(30, 41, 59, 0.3);
            backdrop-filter: blur(10px);
            position: relative;
            overflow: hidden;
        }

        .qr-preview {
            max-width: 300px;
            margin: 2rem auto;
            border-radius: 20px;
            box-shadow: 
                0 25px 50px rgba(0, 0, 0, 0.4),
                0 0 0 1px rgba(255, 255, 255, 0.1);
            animation: qrAppear 0.6s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            /* GPU acceleration */
            transform: translate3d(0, 0, 0);
            backface-visibility: hidden;
        }

        @keyframes qrAppear {
            from {
                opacity: 0;
                transform: translate3d(0, 30px, 0) scale(0.9);
                filter: blur(10px);
            }
            to {
                opacity: 1;
                transform: translate3d(0, 0, 0) scale(1);
                filter: blur(0px);
            }
        }

        .download-buttons {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            justify-content: center;
            margin-top: 1rem;
        }

        .download-btn {
            padding: 12px 24px;
            background: linear-gradient(135deg, var(--success-color), #059669);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 0.95rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            text-decoration: none;
            display: inline-block;
            position: relative;
            overflow: hidden;
            /* GPU acceleration */
            transform: translate3d(0, 0, 0);
            will-change: transform;
        }

        .download-btn:hover {
            background: linear-gradient(135deg, #059669, #047857);
            transform: translate3d(0, -2px, 0);
            box-shadow: 0 15px 30px rgba(16, 185, 129, 0.3);
        }

        .features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 2rem;
            margin: 4rem 0;
            max-width: 1000px;
            margin-left: auto;
            margin-right: auto;
        }

        .feature-card {
            background: rgba(51, 65, 85, 0.6);
            backdrop-filter: blur(15px);
            padding: 2rem;
            border-radius: 20px;
            border: 1px solid rgba(148, 163, 184, 0.1);
            text-align: center;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
            /* GPU acceleration */
            transform: translate3d(0, 0, 0);
            will-change: transform;
        }

        .feature-card:hover {
            transform: translate3d(0, -8px, 0);
            box-shadow: 
                0 30px 60px rgba(0, 0, 0, 0.3),
                0 0 0 1px rgba(255, 255, 255, 0.1);
            border-color: rgba(99, 102, 241, 0.3);
        }

        .feature-icon {
            width: 80px;
            height: 80px;
            margin: 0 auto 1.5rem;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            box-shadow: 
                0 15px 30px rgba(99, 102, 241, 0.3),
                0 0 0 1px rgba(255, 255, 255, 0.1);
            position: relative;
            overflow: hidden;
            /* GPU acceleration */
            transform: translate3d(0, 0, 0);
        }

        .feature-card h3 {
            font-size: 1.3rem;
            font-weight: 700;
            margin-bottom: 1rem;
            color: var(--text-primary);
        }

        .feature-card p {
            color: var(--text-secondary);
            line-height: 1.6;
            font-weight: 400;
        }

        /* Simplified Footer */
        .footer {
            background: rgba(15, 23, 42, 0.95);
            backdrop-filter: blur(20px);
            border-top: 1px solid var(--border-color);
            padding: 2rem 0;
            margin-top: 4rem;
            text-align: center;
        }

        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .footer-links {
            margin-bottom: 1.5rem;
        }

        .footer-links a {
            color: var(--text-secondary);
            text-decoration: none;
            margin: 0 1.5rem;
            padding: 0.5rem 0;
            transition: all 0.3s ease;
            display: inline-block;
        }

        .footer-links a:hover {
            color: var(--primary-color);
            transform: translateY(-2px);
        }

        .footer-copyright {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .footer-copyright p {
            margin: 0;
        }

        .error-message {
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid var(--error-color);
            color: var(--error-color);
            padding: 12px 16px;
            border-radius: 8px;
            margin-top: 1rem;
            font-size: 0.9rem;
        }

        .success-message {
            background: rgba(16, 185, 129, 0.1);
            border: 1px solid var(--success-color);
            color: var(--success-color);
            padding: 12px 16px;
            border-radius: 8px;
            margin-top: 1rem;
            font-size: 0.9rem;
        }

        .hidden {
            display: none !important;
        }

        /* Modal Styles */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }

        .modal.active {
            opacity: 1;
            visibility: visible;
        }

        .modal-content {
            background: var(--bg-secondary);
            border-radius: 20px;
            padding: 2rem;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
            margin: 20px;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.5);
            transform: scale(0.9) translateY(50px);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .modal.active .modal-content {
            transform: scale(1) translateY(0);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid var(--border-color);
        }

        .modal-header h3 {
            color: var(--text-primary);
            font-size: 1.5rem;
            font-weight: 600;
        }

        .modal-close {
            background: none;
            border: none;
            color: var(--text-secondary);
            font-size: 1.5rem;
            cursor: pointer;
            padding: 5px;
            border-radius: 5px;
            transition: all 0.3s ease;
        }

        .modal-close:hover {
            background: var(--bg-card);
            color: var(--text-primary);
        }

        .modal-body {
            color: var(--text-secondary);
            line-height: 1.8;
        }

        .modal-body h4 {
            color: var(--text-primary);
            margin-top: 1.5rem;
            margin-bottom: 1rem;
            font-weight: 600;
        }

        .modal-body ul {
            padding-left: 1.5rem;
            margin: 1rem 0;
        }

        .modal-body li {
            margin-bottom: 0.5rem;
        }

        /* Optimized Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: var(--bg-primary);
        }

        ::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(135deg, var(--primary-dark), var(--primary-color));
        }

        /* Enhanced Mobile Responsiveness */
        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }

            h1 {
                font-size: clamp(1.8rem, 6vw, 2.5rem);
            }

            .main-content {
                gap: 1.5rem;
            }

            .form-section, .preview-section {
                padding: 1.5rem;
                border-radius: 20px;
            }

            .form-row {
                grid-template-columns: 1fr;
                gap: 1rem;
            }

            .color-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 1.5rem;
            }

            .style-options {
                grid-template-columns: repeat(2, 1fr);
                gap: 1rem;
            }

            .download-buttons {
                flex-direction: column;
                gap: 0.75rem;
            }

            .features {
                grid-template-columns: 1fr;
                gap: 1.5rem;
            }

            .qr-placeholder,
            .qr-preview {
                max-width: 280px;
            }

            .footer-content {
                padding: 0 15px;
            }

            .footer-links {
                margin-bottom: 1rem;
            }

            .footer-links a {
                display: block;
                margin: 0.5rem 0;
            }

            .footer-copyright {
                font-size: 0.85rem;
            }

            .generate-btn {
                padding: 18px;
                font-size: 1.1rem;
            }

            .logo {
                width: 70px;
                height: 70px;
            }

            .modal-content {
                margin: 10px;
                padding: 1.5rem;
                max-height: 90vh;
            }
        }

        @media (max-width: 480px) {
            .container {
                padding: 10px;
            }

            h1 {
                font-size: clamp(1.5rem, 7vw, 2rem);
            }

            .form-section, .preview-section {
                padding: 1.25rem;
            }

            .qr-placeholder,
            .qr-preview {
                max-width: 250px;
            }

            .color-picker {
                width: 50px;
                height: 50px;
            }

            .generate-btn {
                padding: 16px;
                font-size: 1rem;
            }

            .download-btn {
                padding: 10px 20px;
                font-size: 0.9rem;
            }

            .feature-card {
                padding: 1.5rem;
            }

            .feature-icon {
                width: 60px;
                height: 60px;
                font-size: 1.5rem;
            }

            .modal-content {
                margin: 5px;
                padding: 1rem;
            }
        }

        /* Performance optimizations for reduced lag */
        @media (prefers-reduced-motion: no-preference) {
            * {
                scroll-behavior: smooth;
            }
        }

        @media (prefers-reduced-motion: reduce) {
            *,
            *::before,
            *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }

        /* Optimize images and media */
        img {
            max-width: 100%;
            height: auto;
            display: block;
        }

        /* Optimize for high DPI displays */
        @media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
            .logo::before {
                font-size: 26px;
            }
        }

        /* Critical rendering optimizations */
        .container * {
            transform-style: preserve-3d;
        }

        /* Lazy loading optimization */
        .lazy-load {
            opacity: 0;
            transform: translateY(30px);
            transition: all 0.6s ease;
        }

        .lazy-load.loaded {
            opacity: 1;
            transform: translateY(0);
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="header">
            <div class="logo"></div>
            <h1>QR Code VCard Generator</h1>
            <p class="subtitle">Create professional VCard QR codes with advanced features and modern design</p>
        </header>

        <main class="main-content">
            <section class="form-section">
                <h2 class="section-title">Contact Information</h2>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="firstName">First Name *</label>
                        <input type="text" id="firstName" required>
                    </div>
                    <div class="form-group">
                        <label for="lastName">Last Name</label>
                        <input type="text" id="lastName">
                    </div>
                </div>

                <div class="form-group">
                    <label for="organization">Organization/Company</label>
                    <input type="text" id="organization">
                </div>

                <div class="form-group">
                    <label for="title">Job Title/Position</label>
                    <input type="text" id="title">
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="phone">Phone Number *</label>
                        <input type="tel" id="phone" required>
                    </div>
                    <div class="form-group">
                        <label for="email">Email *</label>
                        <input type="email" id="email" required>
                    </div>
                </div>

                <div class="form-group">
                    <label for="website">Website</label>
                    <input type="text" id="website" placeholder="https://example.com">
                </div>

                <div class="form-group">
                    <label for="address">Address</label>
                    <textarea id="address" placeholder="Complete address..."></textarea>
                </div>

                <div class="form-group">
                    <label for="notes">Notes</label>
                    <textarea id="notes" placeholder="Additional information..."></textarea>
                </div>

                <div class="form-group">
                    <label>Upload Photo (Optional)</label>
                    <div class="file-upload">
                        <input type="file" id="photoInput" class="file-input" accept="image/*">
                        <label for="photoInput" class="file-label">
                            <div>
                                <div id="photoPreview"></div>
                                <span id="photoText">📸 Click to upload photo</span>
                            </div>
                        </label>
                    </div>
                </div>

                <div class="customization-section">
                    <h3 class="section-title">QR Code Customization</h3>
                    
                    <div class="form-group">
                        <label>QR Code Colors</label>
                        <div class="color-grid">
                            <div class="color-option">
                                <input type="color" class="color-picker" id="fgColor" value="#000000">
                                <small>Foreground</small>
                            </div>
                            <div class="color-option">
                                <input type="color" class="color-picker" id="bgColor" value="#ffffff">
                                <small>Background</small>
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>QR Code Dot Style</label>
                        <div class="style-options">
                            <div class="style-option active" data-style="square">
                                <div style="font-size: 1.2rem;">⬛</div>
                                <small>Square</small>
                            </div>
                            <div class="style-option" data-style="rounded">
                                <div style="font-size: 1.2rem;">🔲</div>
                                <small>Rounded</small>
                            </div>
                            <div class="style-option" data-style="dots">
                                <div style="font-size: 1.2rem;">⚫</div>
                                <small>Dots</small>
                            </div>
                            <div class="style-option" data-style="classy">
                                <div style="font-size: 1.2rem;">◆</div>
                                <small>Classy</small>
                            </div>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="size">Size (px)</label>
                            <select id="size">
                                <option value="200">200x200</option>
                                <option value="256" selected>256x256</option>
                                <option value="300">300x300</option>
                                <option value="400">400x400</option>
                                <option value="512">512x512</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="errorCorrection">Error Correction</label>
                            <select id="errorCorrection">
                                <option value="L">Low (~7%)</option>
                                <option value="M" selected>Medium (~15%)</option>
                                <option value="Q">Quartile (~25%)</option>
                                <option value="H">High (~30%)</option>
                            </select>
                        </div>
                    </div>
                </div>

                <button type="button" class="generate-btn" onclick="generateQR()">
                    <span id="btnText">🚀 Generate QR Code</span>
                </button>

                <div id="errorMessage" class="error-message hidden"></div>
                <div id="successMessage" class="success-message hidden"></div>
            </section>

            <section class="preview-section">
                <h2 class="section-title">QR Code Preview</h2>
                <div class="preview-container">
                    <div id="qrPlaceholder" class="qr-placeholder">
                        <span>🎯 QR Code will appear here after generation</span>
                    </div>
                    <div id="qrResult" class="hidden">
                        <canvas id="qrCanvas"></canvas>
                        <div class="download-buttons">
                            <button class="download-btn" onclick="downloadQR('png')">📥 Download PNG</button>
                            <button class="download-btn" onclick="downloadQR('jpg')">📥 Download JPG</button>
                            <button class="download-btn" onclick="downloadQR('svg')">📥 Download SVG</button>
                        </div>
                    </div>
                </div>
            </section>
        </main>

        <section class="features">
            <div class="feature-card">
                <div class="feature-icon">🎨</div>
                <h3>Advanced Customization</h3>
                <p>Choose colors, dot styles, and sizes according to your needs</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">📱</div>
                <h3>Responsive Design</h3>
                <p>Optimal display on desktop, tablet, and smartphone</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">⚡</div>
                <h3>High Performance</h3>
                <p>Fast loading with optimized code performance</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">🔒</div>
                <h3>Safe & Private</h3>
                <p>All data processed in browser, not stored on server</p>
            </div>
        </section>

        <footer class="footer">
            <div class="footer-content">
                <div class="footer-links">
                    <a href="#" onclick="openModal('privacy')">Privacy Policy</a>
                    <a href="#" onclick="openModal('terms')">Terms of Service</a>
                </div>
                <div class="footer-copyright">
                    <p>&copy; 2024-2025 <strong>Vin Nesia</strong>. All rights reserved.</p>
                </div>
            </div>
        </footer>
    </div>

    <!-- Privacy Policy Modal -->
    <div id="privacyModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Privacy Policy</h3>
                <button class="modal-close" onclick="closeModal('privacy')">&times;</button>
            </div>
            <div class="modal-body">
                <p><strong>Last updated:</strong> December 2024</p>
                
                <h4>1. Information We Collect</h4>
                <p>Our QR Code VCard Generator operates entirely in your browser. We do not collect, store, or transmit any personal information to our servers.</p>
                <ul>
                    <li>All form data (names, phone numbers, emails) stays on your device</li>
                    <li>Uploaded photos are processed locally in your browser</li>
                    <li>Generated QR codes are created client-side</li>
                </ul>

                <h4>2. Data Processing</h4>
                <p>All data processing happens locally in your browser using JavaScript. When you:</p>
                <ul>
                    <li>Enter contact information - it's stored temporarily in browser memory</li>
                    <li>Upload a photo - it's converted to base64 format locally</li>
                    <li>Generate a QR code - it's created using client-side libraries</li>
                    <li>Download the QR code - it's saved directly from your browser</li>
                </ul>

                <h4>3. Data Storage</h4>
                <p>We do not store any of your data on our servers. All information is:</p>
                <ul>
                    <li>Processed locally in your browser</li>
                    <li>Cleared when you refresh or close the page</li>
                    <li>Never transmitted to external servers</li>
                </ul>

                <h4>4. Third-Party Services</h4>
                <p>We use the following third-party services:</p>
                <ul>
                    <li>CDN services for loading JavaScript libraries (QRious)</li>
                    <li>No analytics or tracking services</li>
                    <li>No advertising networks</li>
                </ul>

                <h4>5. Your Rights</h4>
                <p>Since we don't collect or store personal data, there's no data to access, modify, or delete. You have complete control over your information as it never leaves your device.</p>

                <h4>6. Contact</h4>
                <p>If you have questions about this privacy policy, please contact us at privacy@vinnesia.my.id</p>
            </div>
        </div>
    </div>

    <!-- Terms of Service Modal -->
    <div id="termsModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Terms of Service</h3>
                <button class="modal-close" onclick="closeModal('terms')">&times;</button>
            </div>
            <div class="modal-body">
                <p><strong>Last updated:</strong> December 2024</p>
                
                <h4>1. Acceptance of Terms</h4>
                <p>By using this QR Code VCard Generator, you agree to be bound by these Terms of Service and our Privacy Policy.</p>

                <h4>2. Service Description</h4>
                <p>Our service provides:</p>
                <ul>
                    <li>Free QR code generation for VCard contacts</li>
                    <li>Customization options for colors and styles</li>
                    <li>Multiple download formats (PNG, JPG, SVG)</li>
                    <li>Client-side processing for privacy</li>
                </ul>

                <h4>3. Acceptable Use</h4>
                <p>You agree to use the service only for lawful purposes and in accordance with these Terms. You agree NOT to:</p>
                <ul>
                    <li>Generate QR codes with illegal, harmful, or offensive content</li>
                    <li>Use the service to distribute malware or malicious content</li>
                    <li>Attempt to interfere with or damage the service</li>
                    <li>Use automated systems to access the service excessively</li>
                </ul>

                <h4>4. Intellectual Property</h4>
                <p>The service interface and code are owned by Vin Nesia. QR codes generated by users belong to the users who created them.</p>

                <h4>5. Service Availability</h4>
                <p>We strive to maintain high availability but do not guarantee uninterrupted service. We reserve the right to:</p>
                <ul>
                    <li>Modify or discontinue the service with notice</li>
                    <li>Perform maintenance that may temporarily affect availability</li>
                    <li>Update features and functionality</li>
                </ul>

                <h4>6. Limitation of Liability</h4>
                <p>This service is provided "as is" without warranties. We are not liable for:</p>
                <ul>
                    <li>Any damages resulting from use of the service</li>
                    <li>Loss of data (as we don't store your data)</li>
                    <li>Any issues with generated QR codes</li>
                </ul>

                <h4>7. Changes to Terms</h4>
                <p>We may update these terms occasionally. Continued use of the service after changes constitutes acceptance of the new terms.</p>

                <h4>8. Contact Information</h4>
                <p>For questions about these terms, contact us at legal@vinnesia.my.id</p>
            </div>
        </div>
    </div>

    <!-- Help Modal -->
    <div id="helpModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Help Center</h3>
                <button class="modal-close" onclick="closeModal('help')">&times;</button>
            </div>
            <div class="modal-body">
                <h4>How to Use the QR Code Generator</h4>
                <p>Follow these simple steps to create your professional VCard QR code:</p>

                <h4>Step 1: Enter Contact Information</h4>
                <ul>
                    <li>Fill in required fields: First Name, Phone, Email</li>
                    <li>Add optional information like organization, title, website</li>
                    <li>Include address and notes if needed</li>
                </ul>

                <h4>Step 2: Upload Photo (Optional)</h4>
                <ul>
                    <li>Click the upload area to select a photo</li>
                    <li>Supported formats: PNG, JPG, JPEG, GIF, WebP</li>
                    <li>Maximum file size: 5MB</li>
                </ul>

                <h4>Step 3: Customize Appearance</h4>
                <ul>
                    <li>Choose foreground and background colors</li>
                    <li>Select dot style: Square, Rounded, Dots, or Classy</li>
                    <li>Pick size and error correction level</li>
                </ul>

                <h4>Step 4: Generate and Download</h4>
                <ul>
                    <li>Click "Generate QR Code" button</li>
                    <li>Preview your QR code</li>
                    <li>Download in PNG, JPG, or SVG format</li>
                </ul>

                <h4>Tips for Best Results</h4>
                <ul>
                    <li>Use high contrast colors for better scanning</li>
                    <li>Test your QR code with different devices</li>
                    <li>Choose higher error correction for damaged environments</li>
                    <li>Use larger sizes for printing</li>
                </ul>

                <h4>Troubleshooting</h4>
                <ul>
                    <li>If generation fails, check all required fields</li>
                    <li>For photo issues, try a smaller or different format</li>
                    <li>Refresh the page if experiencing errors</li>
                </ul>
            </div>
        </div>
    </div>

    <!-- FAQ Modal -->
    <div id="faqModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Frequently Asked Questions</h3>
                <button class="modal-close" onclick="closeModal('faq')">&times;</button>
            </div>
            <div class="modal-body">
                <h4>Q: Is this service really free?</h4>
                <p>A: Yes, completely free! No registration, no hidden fees, no ads.</p>

                <h4>Q: Is my data safe?</h4>
                <p>A: Absolutely. All processing happens in your browser. We never see or store your information.</p>

                <h4>Q: What devices can scan my QR code?</h4>
                <p>A: Any smartphone with a camera and QR code reader app can scan VCard QR codes.</p>

                <h4>Q: Can I use the QR code commercially?</h4>
                <p>A: Yes, you can use generated QR codes for any purpose, including commercial use.</p>

                <h4>Q: What's the difference between the formats?</h4>
                <p>A: PNG offers transparency, JPG is smaller for web use, SVG is perfect for print and scaling.</p>

                <h4>Q: How do I add the contact to my phone?</h4>
                <p>A: Scan the QR code with your phone's camera, then tap the notification to add the contact.</p>

                <h4>Q: Can I edit the QR code after generating?</h4>
                <p>A: QR codes can't be edited after generation. You'll need to create a new one with updated information.</p>

                <h4>Q: Why won't my photo upload?</h4>
                <p>A: Check that your image is under 5MB and in a supported format (PNG, JPG, JPEG, GIF, WebP).</p>

                <h4>Q: What's error correction?</h4>
                <p>A: Higher error correction allows the QR code to be read even if partially damaged or dirty.</p>

                <h4>Q: Can I create QR codes in bulk?</h4>
                <p>A: Currently, this tool creates one QR code at a time. We may add bulk features in the future.</p>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrious/4.0.2/qrious.min.js"></script>
    <script>
        let uploadedPhoto = null;
        let currentStyle = 'square';
        let isGenerating = false;

        // Enhanced initialization with performance monitoring
        document.addEventListener('DOMContentLoaded', function() {
            try {
                const startTime = performance.now();
                
                initializeStyleOptions();
                initializePhotoUpload();
                initializeFormValidation();
                initializeColorPickers();
                initializeKeyboardShortcuts();
                initializeLazyLoading();
                
                // Form validation
                const requiredFields = ['firstName', 'phone', 'email'];
                requiredFields.forEach(field => {
                    const element = document.getElementById(field);
                    if (element) {
                        element.addEventListener('input', debounce(validateForm, 300));
                        element.addEventListener('blur', validateForm);
                    }
                });

                const endTime = performance.now();
                console.log(`✅ All components initialized in ${Math.round(endTime - startTime)}ms`);
                
            } catch (error) {
                console.error('❌ Error during initialization:', error);
                showError('Error loading page. Please refresh and try again.');
            }
        });

        // Debounce function for performance
        function debounce(func, wait) {
            let timeout;
            return function executedFunction(...args) {
                const later = () => {
                    clearTimeout(timeout);
                    func(...args);
                };
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
            };
        }

        // Initialize lazy loading for better performance
        function initializeLazyLoading() {
            const observerOptions = {
                threshold: 0.1,
                rootMargin: '50px'
            };

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('loaded');
                        observer.unobserve(entry.target);
                    }
                });
            }, observerOptions);

            document.querySelectorAll('.feature-card').forEach(card => {
                card.classList.add('lazy-load');
                observer.observe(card);
            });
        }

        // Enhanced keyboard shortcuts
        function initializeKeyboardShortcuts() {
            document.addEventListener('keydown', function(e) {
                try {
                    if (e.ctrlKey || e.metaKey) {
                        switch(e.key.toLowerCase()) {
                            case 'enter':
                                e.preventDefault();
                                if (!isGenerating && !document.querySelector('.generate-btn').disabled) {
                                    generateQR();
                                }
                                break;
                            case 's':
                                e.preventDefault();
                                if (!document.getElementById('qrResult').classList.contains('hidden')) {
                                    downloadQR('png');
                                }
                                break;
                        }
                    }
                    
                    // ESC to close modals and error messages
                    if (e.key === 'Escape') {
                        closeAllModals();
                        document.getElementById('errorMessage').classList.add('hidden');
                        document.getElementById('successMessage').classList.add('hidden');
                    }
                    
                } catch (error) {
                    console.error('Error handling keyboard shortcut:', error);
                }
            });
        }

        function initializeColorPickers() {
            const fgColorPicker = document.getElementById('fgColor');
            const bgColorPicker = document.getElementById('bgColor');
            
            if (fgColorPicker) {
                fgColorPicker.addEventListener('change', debounce(function() {
                    console.log('Foreground color changed to:', this.value);
                }, 100));
            }
            
            if (bgColorPicker) {
                bgColorPicker.addEventListener('change', debounce(function() {
                    console.log('Background color changed to:', this.value);
                }, 100));
            }
        }

        // Enhanced form validation with better UX
        function initializeFormValidation() {
            const emailInput = document.getElementById('email');
            if (emailInput) {
                emailInput.addEventListener('input', debounce(function() {
                    const email = this.value.trim();
                    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                    
                    if (email && !emailRegex.test(email)) {
                        this.style.borderColor = 'var(--warning-color)';
                        this.title = 'Invalid email format';
                    } else {
                        this.style.borderColor = '';
                        this.title = '';
                    }
                }, 300));
            }

            const websiteInput = document.getElementById('website');
            if (websiteInput) {
                websiteInput.addEventListener('input', debounce(function() {
                    const website = this.value.trim();
                    if (website && !website.startsWith('http://') && !website.startsWith('https://')) {
                        this.style.borderColor = 'var(--warning-color)';
                        this.title = 'URL must start with http:// or https://';
                    } else {
                        this.style.borderColor = '';
                        this.title = '';
                    }
                }, 300));
            }

            // Auto-format phone number
            const phoneInput = document.getElementById('phone');
            if (phoneInput) {
                phoneInput.addEventListener('input', function() {
                    let value = this.value.replace(/\D/g, ''); // Remove non-digits
                    
                    if (value.startsWith('0')) {
                        value = '+62' + value.substring(1);
                    } else if (!value.startsWith('+62') && !value.startsWith('62')) {
                        if (value.length > 0) {
                            value = '+62' + value;
                        }
                    } else if (value.startsWith('62') && !value.startsWith('+62')) {
                        value = '+' + value;
                    }
                    
                    this.value = value;
                });
            }
        }

        function initializeStyleOptions() {
            const styleOptions = document.querySelectorAll('.style-option');
            styleOptions.forEach(option => {
                option.addEventListener('click', function() {
                    try {
                        styleOptions.forEach(opt => opt.classList.remove('active'));
                        this.classList.add('active');
                        currentStyle = this.getAttribute('data-style');
                        
                        // Visual feedback with enhanced animation
                        this.style.transform = 'scale(0.95)';
                        setTimeout(() => {
                            this.style.transform = '';
                        }, 150);
                        
                        console.log('Style changed to:', currentStyle);
                        
                    } catch (error) {
                        console.error('Error changing style:', error);
                        showError('Failed to change QR Code style');
                    }
                });
            });
        }

        function initializePhotoUpload() {
            const photoInput = document.getElementById('photoInput');
            const photoPreview = document.getElementById('photoPreview');
            const photoText = document.getElementById('photoText');

            photoInput.addEventListener('change', function(e) {
                const file = e.target.files[0];
                if (file) {
                    if (!file.type.startsWith('image/')) {
                        showError('Please select a valid image file (PNG, JPG, JPEG, GIF, WebP)');
                        this.value = '';
                        return;
                    }
                    
                    if (file.size > 5 * 1024 * 1024) {
                        showError('File size too large. Maximum 5MB allowed');
                        this.value = '';
                        return;
                    }

                    const reader = new FileReader();
                    reader.onload = function(e) {
                        try {
                            uploadedPhoto = e.target.result;
                            photoPreview.innerHTML = `<img src="${uploadedPhoto}" class="photo-preview" alt="Photo Preview">`;
                            photoText.textContent = '✅ Photo uploaded successfully - ' + file.name;
                            photoText.style.color = 'var(--success-color)';
                        } catch (error) {
                            console.error('Error processing image:', error);
                            showError('Failed to process image. Please try another file.');
                        }
                    };
                    reader.onerror = function() {
                        showError('Failed to read image file');
                        photoInput.value = '';
                    };
                    reader.readAsDataURL(file);
                } else {
                    uploadedPhoto = null;
                    photoPreview.innerHTML = '';
                    photoText.textContent = '📸 Click to upload photo';
                    photoText.style.color = '';
                }
            });
        }

        function validateForm() {
            const firstName = document.getElementById('firstName').value.trim();
            const phone = document.getElementById('phone').value.trim();
            const email = document.getElementById('email').value.trim();
            
            const fields = {
                firstName: document.getElementById('firstName'),
                phone: document.getElementById('phone'),
                email: document.getElementById('email')
            };
            
            let isValid = true;
            
            // Reset styles
            Object.values(fields).forEach(field => field.style.borderColor = '');
            
            if (!firstName) {
                fields.firstName.style.borderColor = 'var(--error-color)';
                isValid = false;
            }
            
            if (!phone) {
                fields.phone.style.borderColor = 'var(--error-color)';
                isValid = false;
            }
            
            if (!email) {
                fields.email.style.borderColor = 'var(--error-color)';
                isValid = false;
            } else {
                const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                if (!emailRegex.test(email)) {
                    fields.email.style.borderColor = 'var(--error-color)';
                    isValid = false;
                }
            }
            
            return isValid;
        }

        function showError(message) {
            const errorDiv = document.getElementById('errorMessage');
            const successDiv = document.getElementById('successMessage');
            
            successDiv.classList.add('hidden');
            errorDiv.textContent = message;
            errorDiv.classList.remove('hidden');
            
            setTimeout(() => errorDiv.classList.add('hidden'), 6000);
            errorDiv.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }

        function showSuccess(message) {
            const successDiv = document.getElementById('successMessage');
            const errorDiv = document.getElementById('errorMessage');
            
            errorDiv.classList.add('hidden');
            successDiv.textContent = message;
            successDiv.classList.remove('hidden');
            
            setTimeout(() => successDiv.classList.add('hidden'), 4000);
        }

        function generateVCardData() {
            try {
                const firstName = document.getElementById('firstName').value.trim();
                const lastName = document.getElementById('lastName').value.trim();
                const organization = document.getElementById('organization').value.trim();
                const title = document.getElementById('title').value.trim();
                const phone = document.getElementById('phone').value.trim();
                const email = document.getElementById('email').value.trim();
                const website = document.getElementById('website').value.trim();
                const address = document.getElementById('address').value.trim();
                const notes = document.getElementById('notes').value.trim();

                let vcard = 'BEGIN:VCARD\nVERSION:3.0\n';
                
                const fullName = `${firstName} ${lastName}`.trim();
                vcard += `FN:${fullName}\n`;
                vcard += `N:${lastName};${firstName};;;\n`;
                
                if (organization) vcard += `ORG:${organization.replace(/[,;\\]/g, '\\$&')}\n`;
                if (title) vcard += `TITLE:${title.replace(/[,;\\]/g, '\\$&')}\n`;
                if (phone) vcard += `TEL:${phone}\n`;
                if (email) vcard += `EMAIL:${email}\n`;
                if (website) {
                    const url = website.startsWith('http') ? website : `https://${website}`;
                    vcard += `URL:${url}\n`;
                }
                if (address) vcard += `ADR:;;${address.replace(/[,;\\]/g, '\\$&')};;;;\n`;
                if (notes) vcard += `NOTE:${notes.replace(/[,;\\]/g, '\\$&')}\n`;
                
                if (uploadedPhoto) {
                    try {
                        const photoData = uploadedPhoto.split(',')[1];
                        if (photoData && photoData.length > 0) {
                            vcard += `PHOTO;ENCODING=BASE64;TYPE=JPEG:${photoData}\n`;
                        }
                    } catch (photoError) {
                        console.warn('Error adding photo to vCard:', photoError);
                    }
                }
                
                vcard += 'END:VCARD';
                console.log('Generated vCard data length:', vcard.length);
                return vcard;
                
            } catch (error) {
                console.error('Error generating vCard:', error);
                throw new Error('Failed to create vCard data: ' + error.message);
            }
        }

        // Enhanced QR generation with better animations
        function generateQR() {
            if (isGenerating) return;
            
            document.getElementById('errorMessage').classList.add('hidden');
            document.getElementById('successMessage').classList.add('hidden');
            
            if (!validateForm()) {
                showError('Please fill all required fields (First Name, Phone, Email)');
                
                // Add error shake animation
                const generateBtn = document.querySelector('.generate-btn');
                generateBtn.classList.add('error');
                setTimeout(() => generateBtn.classList.remove('error'), 600);
                
                return;
            }

            isGenerating = true;
            const btnText = document.getElementById('btnText');
            const generateBtn = document.querySelector('.generate-btn');
            
            // Enhanced loading state with pulse animation
            btnText.innerHTML = '<span class="loading"></span>Generating QR Code...';
            generateBtn.disabled = true;
            generateBtn.classList.add('generating');

            // Use setTimeout for smooth UX
            setTimeout(() => {
                try {
                    const vCardData = generateVCardData();
                    const size = parseInt(document.getElementById('size').value);
                    const fgColor = document.getElementById('fgColor').value;
                    const bgColor = document.getElementById('bgColor').value;
                    const errorCorrection = document.getElementById('errorCorrection').value;

                    const canvas = document.getElementById('qrCanvas');
                    
                    // Create QR code with QRious
                    const qr = new QRious({
                        element: canvas,
                        value: vCardData,
                        size: size,
                        foreground: fgColor,
                        background: bgColor,
                        level: errorCorrection
                    });

                    // Apply custom style
                    if (currentStyle !== 'square') {
                        requestAnimationFrame(() => {
                            applyQRStyle(canvas, currentStyle);
                        });
                    }

                    // Show result with smooth animation
                    document.getElementById('qrPlaceholder').classList.add('hidden');
                    document.getElementById('qrResult').classList.remove('hidden');

                    // Success state with bounce animation
                    generateBtn.classList.remove('generating');
                    generateBtn.classList.add('success');
                    btnText.innerHTML = '✅ QR Code Generated Successfully!';
                    
                    setTimeout(() => {
                        generateBtn.classList.remove('success');
                        btnText.innerHTML = '🚀 Generate QR Code';
                        generateBtn.disabled = false;
                        isGenerating = false;
                    }, 2500);

                    showSuccess('QR Code generated successfully! Download in your preferred format.');

                } catch (error) {
                    console.error('Error generating QR code:', error);
                    showError('Error generating QR Code: ' + error.message);
                    
                    // Error state with shake animation
                    generateBtn.classList.remove('generating');
                    generateBtn.classList.add('error');
                    btnText.innerHTML = '❌ Error - Try Again';
                    
                    setTimeout(() => {
                        generateBtn.classList.remove('error');
                        btnText.innerHTML = '🚀 Generate QR Code';
                        generateBtn.disabled = false;
                        isGenerating = false;
                    }, 3000);
                }
            }, 500);
        }

        // Optimized QR styling function
        function applyQRStyle(canvas, style) {
            if (style === 'square') return;

            const ctx = canvas.getContext('2d');
            const size = canvas.width;
            const imageData = ctx.getImageData(0, 0, size, size);
            const data = imageData.data;
            
            const styledCanvas = document.createElement('canvas');
            styledCanvas.width = size;
            styledCanvas.height = size;
            const styledCtx = styledCanvas.getContext('2d');
            
            styledCtx.fillStyle = document.getElementById('bgColor').value;
            styledCtx.fillRect(0, 0, size, size);
            
            const moduleSize = Math.floor(size / 25);
            const fgColor = document.getElementById('fgColor').value;
            styledCtx.fillStyle = fgColor;
            
            // Use requestAnimationFrame for smooth rendering
            const renderModules = () => {
                for (let y = 0; y < size; y += moduleSize) {
                    for (let x = 0; x < size; x += moduleSize) {
                        let isDark = false;
                        const centerX = Math.min(x + Math.floor(moduleSize / 2), size - 1);
                        const centerY = Math.min(y + Math.floor(moduleSize / 2), size - 1);
                        const pixelIndex = (centerY * size + centerX) * 4;
                        
                        if (pixelIndex < data.length) {
                            const r = data[pixelIndex];
                            const g = data[pixelIndex + 1];
                            const b = data[pixelIndex + 2];
                            const brightness = (r + g + b) / 3;
                            isDark = brightness < 128;
                        }
                        
                        if (isDark && x + moduleSize <= size && y + moduleSize <= size) {
                            switch (style) {
                                case 'rounded':
                                    styledCtx.beginPath();
                                    const radius = moduleSize * 0.3;
                                    styledCtx.roundRect(x, y, moduleSize, moduleSize, radius);
                                    styledCtx.fill();
                                    break;
                                    
                                case 'dots':
                                    styledCtx.beginPath();
                                    const dotRadius = moduleSize * 0.4;
                                    styledCtx.arc(x + moduleSize/2, y + moduleSize/2, dotRadius, 0, 2 * Math.PI);
                                    styledCtx.fill();
                                    break;
                                    
                                case 'classy':
                                    styledCtx.save();
                                    styledCtx.translate(x + moduleSize/2, y + moduleSize/2);
                                    styledCtx.rotate(Math.PI / 4);
                                    styledCtx.fillRect(-moduleSize/2 * 0.8, -moduleSize/2 * 0.8, moduleSize * 0.8, moduleSize * 0.8);
                                    styledCtx.restore();
                                    break;
                                    
                                default:
                                    styledCtx.fillRect(x, y, moduleSize, moduleSize);
                                    break;
                            }
                        }
                    }
                }
                
                ctx.clearRect(0, 0, size, size);
                ctx.drawImage(styledCanvas, 0, 0);
            };

            requestAnimationFrame(renderModules);
        }

        // roundRect polyfill for older browsers
        if (!CanvasRenderingContext2D.prototype.roundRect) {
            CanvasRenderingContext2D.prototype.roundRect = function(x, y, width, height, radius) {
                if (width < 2 * radius) radius = width / 2;
                if (height < 2 * radius) radius = height / 2;
                this.beginPath();
                this.moveTo(x + radius, y);
                this.arcTo(x + width, y, x + width, y + height, radius);
                this.arcTo(x + width, y + height, x, y + height, radius);
                this.arcTo(x, y + height, x, y, radius);
                this.arcTo(x, y, x + width, y, radius);
                this.closePath();
                return this;
            };
        }

        function downloadQR(format) {
            const canvas = document.getElementById('qrCanvas');
            if (!canvas || canvas.width === 0) {
                showError('Please generate a QR Code first before downloading');
                return;
            }

            const link = document.createElement('a');
            
            try {
                const firstName = document.getElementById('firstName').value.trim();
                const lastName = document.getElementById('lastName').value.trim();
                const timestamp = new Date().toISOString().slice(0, 10);
                let fileName = `qr-vcard-${firstName}${lastName ? '-' + lastName : ''}-${timestamp}`;
                
                if (format === 'svg') {
                    const svgData = generateSVGQR(canvas);
                    const blob = new Blob([svgData], { type: 'image/svg+xml' });
                    link.href = URL.createObjectURL(blob);
                    fileName += '.svg';
                } else {
                    const mimeType = format === 'png' ? 'image/png' : 'image/jpeg';
                    const quality = format === 'jpg' ? 0.95 : 1.0;
                    link.href = canvas.toDataURL(mimeType, quality);
                    fileName += `.${format}`;
                }
                
                link.download = fileName;
                link.style.display = 'none';
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
                
                if (format === 'svg') {
                    setTimeout(() => URL.revokeObjectURL(link.href), 100);
                }
                
                showSuccess(`QR Code downloaded successfully as ${format.toUpperCase()}!`);
                trackEvent('qr_download', 'Downloads', format);
                
            } catch (error) {
                console.error('Error downloading QR code:', error);
                showError('Error downloading: ' + error.message);
            }
        }

        function generateSVGQR(canvas) {
            const ctx = canvas.getContext('2d');
            const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
            const data = imageData.data;
            const size = canvas.width;
            const moduleSize = Math.floor(size / 25);
            const bgColor = document.getElementById('bgColor').value;
            const fgColor = document.getElementById('fgColor').value;
            
            let svg = `<svg xmlns="http://www.w3.org/2000/svg" width="${size}" height="${size}" viewBox="0 0 ${size} ${size}">`;
            svg += `<rect width="${size}" height="${size}" fill="${bgColor}"/>`;
            
            for (let y = 0; y < size; y += moduleSize) {
                for (let x = 0; x < size; x += moduleSize) {
                    const centerX = Math.min(x + Math.floor(moduleSize / 2), size - 1);
                    const centerY = Math.min(y + Math.floor(moduleSize / 2), size - 1);
                    const pixelIndex = (centerY * size + centerX) * 4;
                    
                    if (pixelIndex < data.length) {
                        const r = data[pixelIndex];
                        const g = data[pixelIndex + 1];
                        const b = data[pixelIndex + 2];
                        const brightness = (r + g + b) / 3;
                        
                        if (brightness < 128 && x + moduleSize <= size && y + moduleSize <= size) {
                            switch (currentStyle) {
                                case 'rounded':
                                    const radius = moduleSize * 0.3;
                                    svg += `<rect x="${x}" y="${y}" width="${moduleSize}" height="${moduleSize}" rx="${radius}" ry="${radius}" fill="${fgColor}"/>`;
                                    break;
                                case 'dots':
                                    const dotRadius = moduleSize * 0.4;
                                    svg += `<circle cx="${x + moduleSize/2}" cy="${y + moduleSize/2}" r="${dotRadius}" fill="${fgColor}"/>`;
                                    break;
                                case 'classy':
                                    const diamond = moduleSize * 0.8;
                                    svg += `<rect x="${x + moduleSize/2}" y="${y + moduleSize/2}" width="${diamond}" height="${diamond}" transform="rotate(45 ${x + moduleSize/2} ${y + moduleSize/2})" fill="${fgColor}"/>`;
                                    break;
                                default:
                                    svg += `<rect x="${x}" y="${y}" width="${moduleSize}" height="${moduleSize}" fill="${fgColor}"/>`;
                                    break;
                            }
                        }
                    }
                }
            }
            
            svg += '</svg>';
            return svg;
        }

        // Modal functions
        function openModal(type) {
            const modal = document.getElementById(type + 'Modal');
            if (modal) {
                modal.classList.add('active');
                document.body.style.overflow = 'hidden';
            }
        }

        function closeModal(type) {
            const modal = document.getElementById(type + 'Modal');
            if (modal) {
                modal.classList.remove('active');
                document.body.style.overflow = '';
            }
        }

        function closeAllModals() {
            document.querySelectorAll('.modal').forEach(modal => {
                modal.classList.remove('active');
            });
            document.body.style.overflow = '';
        }

        // Click outside to close modal
        document.addEventListener('click', function(e) {
            if (e.target.classList.contains('modal')) {
                closeAllModals();
            }
        });

        // Analytics tracking
        function trackEvent(action, category = 'QR Generator', label = '') {
            try {
                if (typeof gtag !== 'undefined') {
                    gtag('event', action, {
                        'event_category': category,
                        'event_label': label || window.location.pathname
                    });
                }
                console.log('📊 Event tracked:', action, category, label);
            } catch (error) {
                console.warn('Analytics tracking error:', error);
            }
        }

        // Enhanced error boundary
        window.addEventListener('error', function(e) {
            console.error('🚨 Global error:', e.error);
            if (!e.error.message.includes('Script error')) {
                showError('An unexpected error occurred. Please refresh if the problem persists.');
            }
        });

        window.addEventListener('unhandledrejection', function(e) {
            console.error('🚨 Unhandled promise rejection:', e.reason);
            showError('An error occurred while processing data. Please try again.');
        });

        // Memory cleanup and optimization
        window.addEventListener('beforeunload', function() {
            try {
                if (uploadedPhoto) {
                    uploadedPhoto = null;
                }
                
                document.querySelectorAll('a[href^="blob:"]').forEach(link => {
                    URL.revokeObjectURL(link.href);
                });
                
            } catch (error) {
                console.warn('Cleanup error:', error);
            }
        });

        // Performance monitoring
        if ('performance' in window) {
            window.addEventListener('load', function() {
                setTimeout(() => {
                    const perfData = performance.getEntriesByType('navigation')[0];
                    const loadTime = Math.round(perfData.loadEventEnd - perfData.loadEventStart);
                    console.log('📈 Page load time:', loadTime, 'ms');
                    
                    if (loadTime > 3000) {
                        console.warn('⚠️ Page load time is high. Consider optimization.');
                    }
                }, 100);
            });
        }

        console.log('🚀 Optimized QR VCard Generator v2.0 initialized successfully!');
    </script>

    <!-- Additional Performance Optimizations -->
    <link rel="prefetch" href="https://cdnjs.cloudflare.com/ajax/libs/qrious/4.0.2/qrious.min.js">
    
    <!-- Additional Structured Data -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "SoftwareApplication",
        "name": "Professional QR Code VCard Generator",
        "applicationCategory": "BusinessApplication",
        "operatingSystem": "Any",
        "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "USD"
        },
        "aggregateRating": {
            "@type": "AggregateRating",
            "ratingValue": "4.9",
            "ratingCount": "2547"
        },
        "author": {
            "@type": "Person",
            "name": "Vin Nesia"
        },
        "datePublished": "2024-01-01",
        "dateModified": "2024-12-20",
        "description": "Professional VCard QR code generator with advanced customization, photo upload, multiple styles, and high-quality downloads in PNG, JPG, and SVG formats.",
        "featureList": [
            "Upload photo/logo support",
            "Custom colors and styles",
            "4 different dot styles",
            "Download PNG, JPG, SVG formats",
            "Fully responsive design",
            "Client-side processing for privacy",
            "No registration required",
            "Completely free to use"
        ]
    }
    </script>
</body>
</html>
